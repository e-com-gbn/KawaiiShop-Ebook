<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <title>DÃ©tails | KAWAII SHOP</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="main-header">
        <a href="index.html" class="logo">KAWAII SHOP</a>
        <nav>
            <a href="category.html?genre=action">Action</a>
            <a href="category.html?genre=fantasy">Fantaisie</a>
            <a href="category.html?genre=scifi">Sci-Fi</a>
            <a href="cart.html">ðŸ›’ <span class="cart-count">0</span></a>
        </nav>
    </header>

    <main>
        <div class="product-container" style="max-width: 1100px; margin: 40px auto; display: grid; grid-template-columns: 1fr 1fr; gap: 40px; padding: 20px;">
            <div class="image-gallery">
                <img id="main-product-img" src="" style="width:100%; border-radius:10px; border:1px solid #ddd;">
            </div>

            <div class="info-section">
                <h1 id="product-title" style="font-family:'Bangers'; color:#000; font-size:3rem; margin-bottom:10px;">Chargement...</h1>
                <p id="product-meta" style="color:var(--primary-red); font-weight:bold;"></p>
                
                <div style="font-family:'Bangers'; font-size:2.5rem; color:var(--primary-red); margin: 20px 0;">
                    <span id="product-price">0</span> FCFA
                </div>

                <div style="background:#f9f9f9; padding:20px; border-left:5px solid var(--primary-red); margin-bottom:30px;">
                    <p id="product-description" style="color:#333; line-height:1.6;"></p>
                </div>

                <div style="display:flex; flex-direction:column; gap:15px; background:#eee; padding:20px; border-radius:10px;">
                    <div>
                        <label><b>Tome / Volume :</b></label>
                        <input type="number" id="volume-number" value="1" style="width:60px; padding:5px;">
                    </div>

                    <div>
                        <label><b>Mode de Paiement :</b></label>
                        <select id="payment-method-direct" style="width:100%; padding:10px; border:2px solid var(--primary-red); font-weight:bold;">
                            <option value="Airtel Money">Airtel Money ðŸ”´</option>
                            <option value="Mobicash / Moov">Mobicash / Moov ðŸ”µ</option>
                        </select>
                    </div>
                    
                    <div style="display:flex; gap:10px;">
                        <button id="add-to-cart-btn" class="btn-glow blue" style="flex:1;">+ PANIER</button>
                        <button id="buy-whatsapp-btn" class="btn-glow gold" style="flex:1;">ACHAT DIRECT WHATSAPP</button>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <script src="data.js"></script>
    <script src="script.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const params = new URLSearchParams(window.location.search);
            const id = parseInt(params.get('id'));
            const p = ALL_PRODUCTS.find(item => item.id === id);

            if (p) {
                document.getElementById('product-title').innerText = p.title;
                document.getElementById('product-price').innerText = p.price.toLocaleString();
                document.getElementById('main-product-img').src = p.detailImageUrl || p.imageUrl;
                document.getElementById('product-description').innerText = p.summary;
                document.getElementById('product-meta').innerText = `${p.mediaType} | Par ${p.author}`;

                document.getElementById('add-to-cart-btn').onclick = () => addToCart(p.id, document.getElementById('volume-number').value);
                
                document.getElementById('buy-whatsapp-btn').onclick = () => {
                    buyNowDirect(p.title, p.price.toLocaleString(), document.getElementById('volume-number').value);
                };
            }
        });
    </script>
</body>
</html>
